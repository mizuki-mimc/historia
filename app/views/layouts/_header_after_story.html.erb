<header class="relative flex justify-between items-center px-4 md:px-8 py-4 border-b border-black bg-white shadow-sm" data-controller="mobile-menu">

  <div class="flex-shrink-0">
    <%= link_to root_path, class: "" do %>
      <%= image_tag "logo.png", alt: "Historia", class: "w-24" %>
    <% end %>
  </div>

  <nav class="hidden md:flex items-center space-x-4">
    <% if current_user.admin? %>
      <%= link_to "管理者ページ", admin_root_path, class: "bg-black text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700" %>
    <% end %>
    <%= button_to "ログアウト", logout_path, method: :delete, class: "border border-gray-400 px-4 py-2 rounded-md font-semibold hover:bg-gray-100" %>
    <%= link_to "使い方ガイド ※準備中", "#", class: "border border-gray-400 px-4 py-2 rounded-md font-semibold hover:bg-gray-100" %>
    <%= link_to "ストーリー作成", new_story_path, class: "bg-black text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700" %>
  </nav>

  <div class="md:hidden">
    <button data-action="click->mobile-menu#toggle" class="text-gray-600 hover:text-gray-800">
      <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
    </button>
  </div>

  <div data-mobile-menu-target="menu" class="hidden md:hidden absolute top-full right-0 mt-2 w-48 bg-white border rounded-lg shadow-xl z-20">
    <div class="flex flex-col p-2 space-y-2">
      <%= link_to "ストーリー作成", new_story_path, class: "bg-black text-white px-4 py-2 text-left hover:bg-gray-700 rounded-md" %>
      <% if current_user.admin? %>
        <%= link_to "管理者ページ", admin_root_path, class: "bg-black text-white px-4 py-2 text-left hover:bg-gray-700 rounded-md" %>
      <% end %>
      <%= link_to "使い方ガイド ※準備中", "#", class: "px-4 py-2 text-left hover:bg-gray-100 rounded-md" %>
      <%= button_to "ログアウト", logout_path, method: :delete, class: "w-full text-left px-4 py-2 hover:bg-gray-100 rounded-md" %>
    </div>
  </div>
</header>
